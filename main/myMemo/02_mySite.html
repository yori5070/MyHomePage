<div class="media">
    <div class="media-body panel panel-primary">
        <div class="panel-heading">
            <h4 class="panel-title">Ruby で JSONファイル を Htmlファイルに変換する（このサイトの構造_２）</h4>
        </div>
        <div class="panel-body" style="margin-top:0px;">
            <p>　LibreCAD のコマンド解説では、同じ書式でいけるので JSONファイルに必要な内容を記述し、Rubyスクリプトで Htmlファイルに変化するようにした。</p>
            <p>　ターミナルから ruby json2html 0301_line のように実行すると、ファイル 0301_line.json を読み込み、変換、ファイル 0301_line.html を出力する。</p>
            <p>　キーを表す角丸の枠で囲った文字、枠・背景を装飾したアイコン画像などは記述が長くなるので短縮形で記述できるようにした。</p>
            <p>　以下に JSONファイルの構造を示す</p>
            <pre><code>{
    "secNumber": "章―節",
    "secTitle": "操作の種類",
    "toolIcon": ["line.svg", "アイコン 直線"],
    "data": [
        {
            "docIcon": ["line_2p.svg", "アイコン 線分"],
            "title": "章―節―項　操作の内容",
            "comment": ["　操作の解説を記述"],
            "selOther": [
                "左端のツールバーから選択する操作、%BAR_MenuICON メニューの前の（ツール）アイコンの短縮形"
                "メニューから選択する操作、%DOC_MenuICON メニューの前の（ドック）アイコンの短縮形",
                "コマンドで選択する操作"
            ],
            "oper": [{
                    "title": "操作例（１）",
                    "operstep": [
                        "操作の内容",
                        "%CR_KEY 改行キー、%SP_KEY スペースキー、%ESC_KEY エスケープキーの短縮形、・・・",
                        "%DOC_ICON_MIN 文中で使用するドックアイコンの短縮形、・・・",
                        "・・・"
                    ],
                    "img": ["line_2p_01.png", "線分_例１"]
                },
                {
                    "title": "操作例（２）",
                    "operstep": [
                        "操作の内容",
                        "・・・"
                    ],
                    "img": ["line_2p_02.png", "線分_例２"]
                }
            ]
        },
        {
        ・・・
        }
    ]
}</code></pre>
        </div>
    </div>
</div>
<hr />


<div class="media">
    <div class="media-body panel panel-primary">
        <div class="panel-heading">
            <h4 class="panel-title">javascript で JSONファイル を読み込む（このサイトの構造_１）</h4>
        </div>
        <div class="panel-body" style="margin-top:0px;">
            <p>　何度サイトを作ってみても、見通しの悪さと変更するとぐちゃぐちゃになるので JSONファイルに構造を記述 → 選択メニューをつくる ようにしてみた。</p>
            <pre><code>$(function() {
    $.getJSON("selSide.json" , function(data) {
        var mainFileName = mkAcoList(data); // 選択リストを作る
        loadMain(mainFileName); // メインファイルを表示する
    });           
});</code></pre>
            <p>構造を記述した JSONファイルの構造</p>
            <pre><code> [
  {"section":"スピーカー","secDir":"Speaker", "secFile":"secSpeaker","data":[
    {"name":"制作したもの一覧"},
    {"name":"スピーカー製作工程"}
    ]
  },
  {"section":"アンプ","secDir":"amp","data":[
    {"name":"プリアンプ","contFile":"priAmp01"},
    {"name":"パワーアンプ","contFile":"powerAmp01"}
    ]
  },
  {"section":"Librecad","secDir":"Librecad","secFile":"secLibrecad","data":[
    {"name":"はじめに","contFile":"00_intro"},
    {"name":"１，基本的な操作","contFile":"01_basic"},
    {"name":"２，設定","contFile":"02_option"},
    {"name":"３−１，直線を書く","contFile":"0301_line"}    
    ]
  },  
  {"section":"自費出版本","data":[
    ]
  },
  {"section":"DIY","data":[
    ]
  },
  {"section":"覚え書き","secDir":"myMemo","data":[
    ]
  }
]</code></pre>
        </div>
    </div>
</div>
<hr />
